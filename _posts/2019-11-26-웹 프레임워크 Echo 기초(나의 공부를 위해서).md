---
title: "웹 프레임워크 Echo 기초(나의 공부를 위해서)"
date: 2019-11-26 08:30:28 -0400
categories: Development
---



# Hello World 출력하기

1. e := echo.New() 로 echo 프레임워크를 다루기 위한 객체를 생성한다.
2. e.GET 을 통해 GET방식 메소드를 생성할 수 있다.
	- 매개변수로는 경로 , 경로를 받아 처리할 함수 2가지를 받는다.
3. e.GET 에서 반환값으로 c.String() 함수를 반환한다.
	- c.String()에 매개변수로는 상태코드 와 문자열(출력될 값)을 받는다.
4. e.Logger.Fatal(e.Start(":원하는 포트")) 로 서버를 연다.
5. 주소창에 localhost를 입력한다.

```go
package main

import (
	"github.com/labstack/echo"
	"net/http"
)

// Hello World! 출력하기
func main() {
	e := echo.New()
	e.GET("/", func(c echo.Context) error {
		return c.String(http.StatusOK, "Hello world!")
	})

	e.Logger.Fatal(e.Start(":80"))
}
```



# 값 받아와서 화면에 출력하기 (GET)

1. getUser 함수에서 id := c.Param("id") 으로 id 객체에 주소창에서 :id의 값으로 받았던 문자를 받는다.
2. getUser 함수 반환값으로 상태코드와 id문자를 반환한다.
3. localhost/users/id 를 주소창에 입력한다. (입력값에 공백은 들어갈 수 없는 거 같다)

```go
// 값 받아와서 화면에 출력하기 (GET)
func main() {
	e := echo.New()

	e.GET("/users/:id", getUser)

	e.Logger.Fatal(e.Start(":80"))
}

func getUser(c echo.Context) error {
	id := c.Param("id")
	return c.String(http.StatusOK, id)
}
```

# Query문으로 값 받아와서 화면에 출력하기 (GET)

1. Team := c.QueryParam("Team")으로 Team 객체에 Query문으로 값을 받는다.
2. Member := c.QueryParam("Member")으로 Member 객체에 Query문으로 값을 받는다.
3. localhost/show?Team=My team&Member=My member 를 주소창에 입력한다. (Query문은 공백 가능한 거 같다)

```go
// Query문으로 값 받아와서 화면에 출력하기 (GET)
func main() {
	e := echo.New()

	e.GET("/show", func(c echo.Context) error {
		Team := c.QueryParam("Team")
		Member := c.QueryParam("Member")
		return c.String(http.StatusOK, "Team : "+Team+"\nMember : "+Member)
	})
	
	e.Logger.Fatal(e.Start(":80"))
}
```

# Form/application/x-www-form-urlencoded (POST)

1. e.POST()도 마찬가지로 경로와 경로를 처리할 함수를 매개변수로 받는다.
2. name := c.FormValue("name")으로 name의 값을 받는다.
3. email := c.FormValue("email")으로 email의 값을 받는다.
4. curl -F "name=My name" -F "email=My email@domain.com" http://localhost/save 를 터미널에 입력

```go
func main() {
	e := echo.New()
	e.POST("/save", func(c echo.Context) error {
		name := c.FormValue("name")
		email := c.FormValue("email")
		return c.String(http.StatusOK, "name : "+name+"\nemail : "+email)
	})
	e.Logger.Fatal(e.Start(":80"))
}
```

# // multipart/form-data (POST)

1. avatar, err := c.FormFile("avatar") 에서 avatar를 파일을 갖는 객체로 만듦.
2. src, err := avatar.Open() 에서 src에 avatar의 내용을 넣음.
3. dst, err := os.Create(avatar.Filename) 에서 avatar의 파일이름과 같은 파일을 현재 작업중인 디렉토리에 만듦
4. io.Copy(dst, src) 에서 src 내용을 dst에 넣음.

```go
func main() {
	e := echo.New()
	e.POST("/save", save)
	e.Logger.Fatal(e.Start(":8080"))
}

func save(c echo.Context) error {
	name := c.FormValue("name")
	avatar, err := c.FormFile("avatar")
	if err != nil {
		return err
	}
	src, err := avatar.Open()
	if err != nil {
		return err
	}
	defer src.Close()
	dst, err := os.Create(avatar.Filename)
	if err != nil {
		return err
	}
	defer dst.Close()
	if _, err := io.Copy(dst, src); err != nil {
		return err
	}
	return c.HTML(http.StatusOK, "<b>Thank You! "+name+"</b>")
}
```

# 
