---
title: "알아두면 좋은 데이터베이스 지식 2019-11-26"
date: 2019-11-26 08:30:28 -0400
categories: Development
---
데이터베이스에 대해 깊게 공부해보고 싶어 정리한 글입니다
<hr>

## [ 데이터베이스 ]
여러 사람에 공유되어 사용될 목적으로 저장하는 데이터의 집합

## [ 데이터베이스를 구성하는 용어 ]
테이블 : 특정 데이터를 담기 위한 하나의 데이터 집합
- 회원 테이블, 도서 테이블, 결제 테이블 등

레코드(= Tuple, Row) : 테이블에 저장된 데이터
- 회원 테이블의 레코드 : 이름 + 전화 번호 + 주민등록번호 

속성(= Column) : 레코드를 구성하는 각각의 열
    - 회원 테이블의 속성 : 이름, 전화 번호, 주민등록번호

도메인 : 속성의 데이터 타입 
    - 회원 테이블의 도메인 : varchar(50) 등

기본키 : 레코드를 구분하는 기준이 되는 속성
    - 회원 테이블의 기본 키 : 주민등록번호 

제약 : 속성의 기능을 한정시키는 것 
    - 기본 키인 주민등록번호는 겹칠 수 없으며 빈 값이 들어갈 수 없음
    - 제약된 속성은 빠른 검색을 위해 내부적으로 인덱싱이 됨 (이진 트리로 정렬)

외래키 : 테이블의 관계를 표시하기 위한 속성
    - 도서 테이블에서 회원 테이블의 주민등록번호를 외래 키로 설정하여 대출 기록을 남김

## [ 데이터베이스의 키 ]
테이블에서 각각의 다른 레코드와 구별할 수 있는 기준

![key](https://user-images.githubusercontent.com/52072077/94326556-a0df4c80-ffdf-11ea-9484-1817c01f666f.png)

슈퍼키 : 중복을 허용하지 않는 모든 속성들의 집합
- 학생 테이블의 슈퍼키는 (학번), (주민등록번호), (학번, 주민등록번호) 이다

복합키 : 2개 이상의 속성을 조합하여 만든 속성들의 집합
- 학생 테이블의 복합키는 (학번, 주민등록번호) 이다

후보키 : 유일성과 최소성을 모두 만족하는, 슈퍼키 중 최소성을 가지는 속성
- 학생이라는 테이블이 있다면 후보키는 (학번), (주민등록번호) 이다

기본키 : 후보키 중에서 특별히 선정된 속성
- 학생이라는 테이블이 있다면 기본키는 (학번) 또는 (주민등록번호) 를 선택할 수 있다

대체키 : 후보키 중에서 기본키가 아닌 속성
- 학생이라는 테이블이 있다면 대체키는 (학번) 또는 (주민등록번호) 가 될 수 있다 (기본키에 따라 좌우됨)

외래키 : 다른 릴레이션의 속성을 참조하는 속성
- 수강 테이블의 학번 속성은 학생 테이블의 학번 속성을 참조하여 값을 공유할 수 있다
- 수강 테이블의 학번 속성에는 학생 테이블의 학번 속성에 없는 값을 입력할 수 없다
- 수강 테이블의 학번 데이터가 존재하는 한, 학생 테이블을 삭제할 수 없다

## [ 데이터 관계 ]

ONE TO ONE : 정확히 1대1로 매칭되는 형태
- 유저 테이블과 유저 프로필 테이블 

ONE TO MANY : 하나의 주체가 여러개의 레코드를 가질 수 있는 형태
- 유저 테이블과 주문 기록 테이블

MANY TO MANY : ONE TO MANY TO ONE 의 형태 
- 유저 테이블과 주문 기록 테이블 + 상품 테이블과 주문 기록 테이블

## [ 트랜잭션 ]
데이터베이스의 상태를 변화시키기 위해 수행하는 작업 단위
```
# 사용자 A가 사용자 B에게 만원을 송금한다 

* 이 때 생기는 DB 작업
- 1. 사용자 A의 계좌에서 만원을 차감한다 : UPDATE 문을 사용해 사용자 A의 잔고를 변경
- 2. 사용자 B의 계좌에 만원을 추가한다 : UPDATE 문을 사용해 사용자 B의 잔고를 변경

현재 작업 단위 : 출금 UPDATE + 입금 UPDATE
-> 이를 통틀어 하나의 트랜잭션이라고 한다
-> 두 쿼리문 모두 성공적으로 완료되어야 트랜잭션이 완료되는 것이다 "Commit"
-> 두 쿼리 중 하나라도 실패하면 모든 쿼리문을 취소하고 이전 상태로 되돌린다 "Rollback"
```

즉, 하나의 트랜잭션 설계를 잘 만드는 것이 데이터를 다룰 때 많은 이점을 가져다준다

```
# 트랜젝션의 4가지 특징

원자성(A) : 트랜잭션이 "Commit" 또는 "Rollback" 되어야 한다
-> 입금과 출금 중 하나만 처리된다면 원자성 위반이다 

일관성(C) : 트랜젝션의 작업 처리 결과는 항상 데이터의 일관성을 보장해야한다
-> 잔액이 없는데 출금이 가능해지면 일관성 위반이다

고립성(I) : 각각의 트랜젝션은 서로 간섭없이 독립적으로 수행해야 한다
-> 출금과 입금이 동시에 수행되더라도 출금 -> 입금 처럼 수행한 것처럼 해야 한다

지속성(D) : 트랜젝션이 성공적으로 완료되었으면, 결과는 영구적으로 반영되어야 한다
```



