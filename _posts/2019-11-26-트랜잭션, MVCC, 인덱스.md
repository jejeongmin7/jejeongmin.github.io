---
title: "트랜잭션, MVCC, 인덱스 2019-11-26"
date: 2019-11-26 08:30:28 -0400
categories: Development
---
데이터베이스에서 다루는 트랜잭션, MVCC, 인덱스에 대해 알아봅니다.
<hr>

## [ 트랜잭션 ]
데이터베이스의 상태를 변화시키기 위해 수행하는 작업 단위
```
# 사용자 A가 사용자 B에게 만원을 송금한다 

* 이 때 생기는 DB 작업
- 1. 사용자 A의 계좌에서 만원을 차감한다 : UPDATE 문을 사용해 사용자 A의 잔고를 변경
- 2. 사용자 B의 계좌에 만원을 추가한다 : UPDATE 문을 사용해 사용자 B의 잔고를 변경

현재 작업 단위 : 출금 UPDATE + 입금 UPDATE
-> 이를 통틀어 하나의 트랜잭션이라고 한다
-> 두 쿼리문 모두 성공적으로 완료되어야 트랜잭션이 완료되는 것이다 "Commit"
-> 두 쿼리 중 하나라도 실패하면 모든 쿼리문을 취소하고 이전 상태로 되돌린다 "Rollback"
```

즉, 하나의 트랜잭션 설계를 잘 만드는 것이 데이터를 다룰 때 많은 이점을 가져다준다

```
# 트랜젝션의 4가지 특징

원자성(A) : 트랜잭션이 "Commit" 또는 "Rollback" 되어야 한다
-> 입금과 출금 중 하나만 처리된다면 원자성 위반이다 

일관성(C) : 트랜젝션의 작업 처리 결과는 항상 데이터의 일관성을 보장해야한다
-> 잔액이 없는데 출금이 가능해지면 일관성 위반이다

고립성(I) : 각각의 트랜젝션은 서로 간섭없이 독립적으로 수행해야 한다
-> 출금과 입금이 동시에 수행되더라도 출금 -> 입금 처럼 수행한 것처럼 해야 한다

지속성(D) : 트랜젝션이 성공적으로 완료되었으면, 결과는 영구적으로 반영되어야 한다
```



